---
import { APP_CONTENT } from "@/config/Content";
import Button from "@/components/ui/astro-ui/button.astro";
import Tag from "@/components/ui/astro-ui/tag.astro";
import HeroBgVector from "@/components/shared/astro-components/hero-bg-vector.astro";
import { parseHeroText } from "@/utils/text-formatter";

const heroText = parseHeroText(APP_CONTENT.HOME_PAGE.Hero.title);
---

<HeroBgVector
  className="h-screen w-full gap-12 px-4 transition-all delay-200 ease-in-out md:px-6 lg:p-0"
>
  <div class="max-w-[45.219rem] space-y-6 text-center" id="box">
    <div class="space-y-6">
      <Tag>
        {APP_CONTENT.HOME_PAGE.Hero.tagline}
      </Tag>
    </div>
    <h1 class="text-3xl font-semibold sm:text-6xl" set:html={heroText} />
    <p id="typingBox" class="text-grey-300 text-sm font-normal sm:text-lg">
      {APP_CONTENT.HOME_PAGE.Hero.description}
    </p>
  </div>

  <div class="flex w-full max-w-sm flex-col gap-4 md:flex-row md:gap-9">
    <Button
      size="lg"
      icon_name="arrow_right"
      class="w-full"
      id="start-contributing-button"
      href="https://www.openstreetmap.org"
      target="_blank"
    >
      Start Contributing
    </Button>
    <Button
      variant="secondary"
      size="lg"
      id="watch-videos-button"
      class="w-full"
    >
      Watch Videos
    </Button>
  </div>
</HeroBgVector>

<script>
  import gsap from "@/utils/gsap";

  const box = document.getElementById("box");

  gsap.from(box, {
    opacity: 0,
    y: 70, // starts below
    duration: 2,
    ease: "bounce.out",
    scrollTrigger: {
      trigger: box,
      start: "top 60%", // when box enters 60% of viewport
      toggleActions: "play none none reverse",
    },
  });
</script>
